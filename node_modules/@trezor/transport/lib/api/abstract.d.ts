/// <reference types="node" />
import { TypedEmitter } from '@trezor/utils';
import type { AnyError, AsyncResultWithTypedError, Success, Logger } from '../types';
import * as ERRORS from '../errors';
export interface AbstractApiConstructorParams {
    logger?: Logger;
}
export declare abstract class AbstractApi extends TypedEmitter<{
    'transport-interface-change': string[];
    'transport-interface-error': typeof ERRORS.DEVICE_NOT_FOUND | typeof ERRORS.DEVICE_UNREADABLE;
}> {
    logger: Logger;
    constructor({ logger }: AbstractApiConstructorParams);
    abstract enumerate(): AsyncResultWithTypedError<string[], typeof ERRORS.ABORTED_BY_TIMEOUT | typeof ERRORS.ABORTED_BY_SIGNAL | typeof ERRORS.UNEXPECTED_ERROR>;
    abstract read(path: string): AsyncResultWithTypedError<ArrayBuffer, typeof ERRORS.DEVICE_NOT_FOUND | typeof ERRORS.INTERFACE_UNABLE_TO_OPEN_DEVICE | typeof ERRORS.INTERFACE_DATA_TRANSFER | typeof ERRORS.DEVICE_DISCONNECTED_DURING_ACTION | typeof ERRORS.UNEXPECTED_ERROR | typeof ERRORS.ABORTED_BY_TIMEOUT>;
    abstract write(path: string, buffers: Buffer): AsyncResultWithTypedError<undefined, typeof ERRORS.DEVICE_NOT_FOUND | typeof ERRORS.INTERFACE_UNABLE_TO_OPEN_DEVICE | typeof ERRORS.INTERFACE_DATA_TRANSFER | typeof ERRORS.DEVICE_DISCONNECTED_DURING_ACTION | typeof ERRORS.UNEXPECTED_ERROR>;
    abstract openDevice(path: string, first: boolean): AsyncResultWithTypedError<undefined, typeof ERRORS.DEVICE_NOT_FOUND | typeof ERRORS.INTERFACE_UNABLE_TO_OPEN_DEVICE | typeof ERRORS.UNEXPECTED_ERROR | typeof ERRORS.ABORTED_BY_TIMEOUT | typeof ERRORS.ABORTED_BY_SIGNAL>;
    abstract closeDevice(path: string): AsyncResultWithTypedError<undefined, typeof ERRORS.DEVICE_NOT_FOUND | typeof ERRORS.INTERFACE_UNABLE_TO_CLOSE_DEVICE | typeof ERRORS.UNEXPECTED_ERROR>;
    protected success<T>(payload: T): Success<T>;
    protected error<E extends AnyError>(payload: {
        error: E;
        message?: string;
    }): {
        success: false;
        error: E;
        message: string | undefined;
    };
    protected unknownError<E extends AnyError>(err: Error, expectedErrors: E[]): {
        success: false;
        error: NonNullable<E>;
        message: string | undefined;
    } | {
        success: false;
        error: "unexpected error";
        message: string;
    };
}
//# sourceMappingURL=abstract.d.ts.map